#KAC反作弊系统，验证mod完整性并弹窗提醒。
#嗯..想删掉也可以嘛。但请不要用其他mod导致的bug来烦我。唔姆

namespace = rg_kac_event

country_event = {
	id = rg_kac_event.1
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		from = { OR = {
			is_country_type = gray 
			is_same_value = ROOT
		}}
		is_same_value = event_target:gray_owner
	}

	immediate = {
		if = {
			limit = {
				NOT = { has_global_flag = rg_kac_499 }
			}
			country_event = { id = rg_kac_event.2 }
		}
		if = {
			limit = {
				exists = event_target:gray_governor
				NOT = { has_global_flag = rg_kac_leader }
			}
			country_event = { id = rg_kac_event.2 }
		}
		if = {
			limit = {
				exists = event_target:azur_R_fallen_empire
				has_global_flag = have_azur_R_fallen
			}
			country_event = { id = rg_kac_event.6 }
		}
		if = {
			limit = {
				has_global_flag = a_deadly_tempest_mod_active
			}
			country_event = { id = rg_kac_event.7 }
		}
		if = {
			limit = {
				has_global_flag = z_cm_installed
			}
			country_event = { id = rg_kac_event.8 }
		}
	}
}

country_event = {
    id = rg_kac_event.2
    title = "rg_kac_event.2.title"
    is_triggered_only = yes
	fire_only_once = yes

    trigger = {
		is_same_value = event_target:gray_owner
    }

    diplomatic = yes
    picture_event_data = {
        portrait = event_target:rg_gray_country_leader
        room = "ethic_spaceship_room"
    }
	show_sound = event_red_alert

    desc = {
        text = "rg_kac_event.2.desc"
    }

    option = {
        name = rg_kac_event.2.a
		hidden_effect = {
			#country_event = { id = rg_kac_event.2 }
		}
        default_hide_option = yes
    }
}

country_event = {
    id = rg_kac_event.3
    title = "rg_kac_event.2.title"
    is_triggered_only = yes
	fire_only_once = yes

    trigger = {
		is_same_value = event_target:gray_owner
    }

    diplomatic = yes
    picture_event_data = {
        portrait = event_target:rg_gray_country_leader
        room = "ethic_spaceship_room"
    }
	show_sound = event_red_alert

    desc = {
        text = "rg_kac_event.3.desc"
    }

    option = {
        name = rg_kac_event.3.a
		hidden_effect = {
			#country_event = { id = rg_kac_event.3 }
		}
        default_hide_option = yes
    }
}

event = {
	id = rg_kac_event.4
	hide_window = yes
	is_triggered_only = yes

	trigger = {
	}

	immediate = {
		no_scope = {
			remove_global_flag = rg_kac_499
			remove_global_flag = rg_kac_leader
		}
	}
}

country_event = {
    id = rg_kac_event.5
    title = "rg_kac_event.2.title"
    is_triggered_only = yes

    trigger = {
		is_same_value = event_target:gray_owner
    }

    diplomatic = yes
    picture_event_data = {
        portrait = event_target:rg_gray_country_leader
        room = "ethic_spaceship_room"
    }
	show_sound = event_red_alert

    desc = {
        text = "rg_kac_event.5.desc"
    }

    option = {
        name = rg_kac_event.5.a
		hidden_effect = {
			#country_event = { id = rg_kac_event.3 }
		}
        default_hide_option = yes
    }
}

country_event = {
    id = rg_kac_event.6
    title = "rg_kac_event.6.title"
    is_triggered_only = yes

    trigger = {
		is_same_value = event_target:gray_owner
    }

    diplomatic = yes
    picture_event_data = {
        portrait = event_target:rg_gray_country_leader
        room = "ethic_spaceship_room"
    }
	show_sound = event_red_alert

    desc = {
        text = "rg_kac_event.6.desc"
    }

    option = {
        name = rg_kac_event.6.a
		hidden_effect = {
			#country_event = { id = rg_kac_event.3 }
		}
        default_hide_option = yes
    }
}

country_event = {
    id = rg_kac_event.7
    title = "rg_kac_event.6.title"
    is_triggered_only = yes

    trigger = {
		is_same_value = event_target:gray_owner
    }

    diplomatic = yes
    picture_event_data = {
        portrait = event_target:rg_gray_country_leader
        room = "ethic_spaceship_room"
    }
	show_sound = event_red_alert

    desc = {
        text = "rg_kac_event.7.desc"
    }

    option = {
        name = rg_kac_event.7.a
		hidden_effect = {
			# country_event = { id = rg_kac_event.1 }
		}
        default_hide_option = yes
    }
	option = {
        name = rg_kac_event.7.b
		hidden_effect = {
			remove_global_flag = a_deadly_tempest_mod_active
		}
        default_hide_option = yes
    }
}

country_event = {
    id = rg_kac_event.8
    title = "rg_kac_event.6.title"
    is_triggered_only = yes

    trigger = {
		is_same_value = event_target:gray_owner
    }

    diplomatic = yes
    picture_event_data = {
        portrait = event_target:rg_gray_country_leader
        room = "ethic_spaceship_room"
    }
	show_sound = event_red_alert

    desc = {
        text = "rg_kac_event.8.desc"
    }

    option = {
        name = rg_kac_event.8.a
		hidden_effect = {
			# country_event = { id = rg_kac_event.1 }
		}
        default_hide_option = yes
    }
	option = {
        name = rg_kac_event.8.b
		hidden_effect = {
			remove_global_flag = z_cm_installed
		}
        default_hide_option = yes
    }
}